# 第7章 受信フィルタリングエンジン (TFE)

RFEはEthernet MACからEthernetフレームを受け取り、処理した後、RX FCTに
渡します。RFEは受信したEthernetフレームのフィルタリング、TCP/UDP/ICMP/
IGMP/IPの各チェックサムの検証、VLANタグの削除を担当します。

MACからフレームを受け取る際、RFEはフレームデータとステータス情報を取得
します。フレーム処理が完了すると、RFEはMACから取得したステータス情報を
カプセル化し、この情報をフレームデータと共にRXコマンドA、RXコマンドB、
RXコマンドCの形式でFCTに渡します。

RFEは（有効であれば）フレームからVLANタグを削除することができます。
VLANタグの削除は、Receive Filtering Engine Controlレジスタ（RFE_CTL）の
Enable VLAN Tag Strippingビットで制御されます。このビットがセットされて
いるとタグは除去されます。クリアされているとRFEはフレームを一切変更
しません。

> 注意: フレームに複数のVLANタグが存在する場合、RFEは（MACソースア
> ドレスに隣接する）最初のタグだけを削除します。

RFEは（有効であれば）レイヤ3チェックサムとVLAN IDをRXコマンドBで提供
します。RXコマンドAとRXコマンドCはフレームのステータスを含んでいます。

RFEはフレームにチェックサムエラーがあると判断すると、エラー状態を識別
するためにRXコマンドAに適切なエラービットをセットします。

> 注意: FCTはチェックサム検証に失敗したフレームをFCT RX FIFOから巻き
> 戻しません。

[以下省略]
