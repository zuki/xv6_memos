# TLBI VMALLE1OS, TLBI VMALLE1OSNXS: VMID, ステージ1のすべて, EL1, Outer ShareableによるTLBの無効化

TLBI VMALLE1OS, TLBI VMALLE1OSNXSの特徴:

## 目的

次のすべての要件を満たすTLBからの翻訳テーブルエントリのキャッシュコピーを無効にする。

- エントリは、翻訳テーブルウォークの任意のレベルからのステージ1翻訳テーブルエントリである。
- EL2が実装されており、SCR_EL3.NS値で示されるセキュリティ状態が有効である場合。
    - HCR_EL2.{E2H、TGE}が{1、1}でない場合は現在のVMIDを持つエントリが使用され、SCR_EL3.NSの現在値で示されるセキュリティ状態用のEL1&0翻訳機構を使用して指定されたVAを翻訳することが要求される。
    - HCR_EL2.{E2H, TGE}が{1, 1}の場合、エントリーはSCR_EL3.NSの現在値で示されるセキュリティ状態用のEL2&0翻訳機構を使用して指定されたVAを翻訳することが要求される。
- EL2が実装されていない、または、セキュリティ状態が無効になっている場合、エントリはSCR_EL3.NSの現在値で示されるセキュリティ状態用のEL1＆0翻訳機構を使用して指定されたVAを翻訳することが要求される。

無効化は、このシステム命令を実行するPEと同じ外部共有可能な共有可能領域内のすべてのPEに適用される。

### 注意1

    TLBメンテナンス命令がSecure EL1&0翻訳機構に生成され、VMID引数を渡すように定義されている場合、またはSCR_EL3.EEL2==1の場合にVMID引数を渡すように定義されるであろう場合、

    - SCR_EL3.EEL2=1 の PE は、SCR_EL3.EEL2=0 の PE の Secure EL1&0 翻訳のエントリを無効にするアーキテクチャ上の必要はない。
    - SCR_EL3.EEL2==0 の PE は、SCR_EL3.EEL2==1 の PE のセキュア EL1&0 変換のエントリを無効にすることは、アーキテクチャ上要求されない。
    - PEは、アーキテクチャ上、VMIDが0である、同じ共有可能な要求ドメイン内のシステムMMUのSecure EL1&0翻訳内のすべての関連エントリを無効にすることが要求される。

### 注意2

    EL1&0翻訳機構では、無効化はグローバルエントリと任意のASIDを持つ非グローバルエントリの両方に適用される。

FEAT_XSが実装されている場合、このシステム命令のnXSバリアントが定義される。

どちらのバージョンも同じ無効化を実行するが、nXS修飾子なしのTLBIシステム命令は、スコープ内の古い変換情報を使用するすべてのメモリアクセスが完了するまで完了とみなすのを待つ。

nXS修飾子付きのTLBIシステム命令は、XS属性が0に設定されているメモリアクセスのサブセットが完了したときに完了したとみなす。
